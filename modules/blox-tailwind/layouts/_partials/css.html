{{/* HB Tailwind CSS v4 Processing with Hugo's Native Function */}}
{{ with resources.Get "css/main.css" }}
  {{/* Build dynamic @source list and prepend it before main.css */}}
  {{ $dynamic_sources_str := partial "tailwind_sources.html" . }}
  {{ $dynamic_sources_res := resources.FromString "css/_dynamic_sources.css" $dynamic_sources_str }}
  {{ $main_css := . }}
  {{ $entry := slice $dynamic_sources_res $main_css | resources.Concat "css/_entry.css" }}
  {{ $opts := dict "minify" (not hugo.IsDevelopment) }}
  {{ with $entry | css.TailwindCSS $opts }}
    {{ if hugo.IsDevelopment }}
      <link rel="stylesheet" href="{{ .RelPermalink }}">
    {{ else }}
      {{ with . | fingerprint }}
        <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}
