{{/*
  Hugo Blox Builder Shared Callout Renderer
  
  Renders callouts with consistent styling for both shortcodes and render hooks.
  
  Parameters:
  - type: The callout type (note, tip, important, warning, caution, or custom icon name)
  - content: The callout content (HTML)
  - title: Optional title for the callout
  - source: "shortcode" or "renderhook" for context
*/}}

{{ $type := (lower .type) | default "note" }}
{{ $content := .content }}
{{ $title := .title }}
{{ if not $title }}
  {{/* Try i18n translation with "callout_" prefix, fall back to title case */}}
  {{ $i18n_key := printf "callout_%s" $type }}
  {{ $title = or (i18n $i18n_key) (title $type) }}
{{ end }}
{{ $source := .source | default "shortcode" }}

{{/* Define icon and styling mappings for different alert types */}}
{{ $alertConfigs := dict
  "note" (dict 
    "icon" "information-circle"
    "class" "bg-primary-100 dark:bg-primary-900"
    "textClass" "text-primary-600 dark:text-primary-300"
  )
  "tip" (dict
    "icon" "light-bulb"
    "class" "bg-green-100 dark:bg-green-900"
    "textClass" "text-green-600 dark:text-green-300"
  )
  "important" (dict
    "icon" "exclamation-circle"
    "class" "bg-purple-100 dark:bg-purple-900"
    "textClass" "text-purple-600 dark:text-purple-300"
  )
  "warning" (dict
    "icon" "exclamation-triangle"
    "class" "bg-yellow-100 dark:bg-yellow-900"
    "textClass" "text-red-400"
  )
  "caution" (dict
    "icon" "exclamation-triangle"
    "class" "bg-red-100 dark:bg-red-900"
    "textClass" "text-red-600 dark:text-red-300"
  )
}}

{{/* Get configuration for this callout type, or use custom icon */}}
{{ $config := index $alertConfigs $type }}
{{ $icon := $type }}
{{ $class := "bg-primary-100 dark:bg-primary-900" }}
{{ $textClass := "text-primary-600 dark:text-primary-300" }}

{{ if $config }}
  {{ $icon = $config.icon }}
  {{ $class = $config.class }}
  {{ $textClass = $config.textClass }}
{{ end }}

<div class="flex px-4 py-3 mb-6 rounded-md {{ $class }}">
  <span class="pr-3 pt-1 {{ $textClass }}">
    {{ partial "functions/get_icon" (dict "name" $icon "attributes" "height=\"24\"") }}
  </span>
  <div class="dark:text-neutral-300">
    {{/* Display title if provided */}}
    {{- with $title -}}
      <div class="font-semibold mb-1">
        {{- . -}}
      </div>
    {{- end -}}
    {{/* Display content */}}
    <div>
      {{- $content -}}
    </div>
  </div>
</div>