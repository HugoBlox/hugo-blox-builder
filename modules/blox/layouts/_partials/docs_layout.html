<div class="mx-auto flex max-w-screen-xl">
  {{ partial "components/sidebar.html" (dict "context" . "no_sidebar" false) }}
  {{ partial "components/toc.html" . }}
  <article class="flex w-full min-w-0 min-h-[calc(100vh-var(--navbar-height))] justify-center break-words pb-8 pr-[calc(env(safe-area-inset-right)-1.5rem)]">
    <main class="prose prose-slate lg:prose-xl dark:prose-invert w-full min-w-0 max-w-6xl px-6 pt-4 md:px-12">
      {{ if (.Params.show_breadcrumb | default true) }}
      <div class="mb-1">
        {{ partial "components/breadcrumb.html" . }}
      </div>
      {{ end }}

      {{/* Pagefind metadata for search filtering */}}
      <div class="content" data-pagefind-body>
        <h1 data-pagefind-meta="title">{{ .Title }}</h1>
        {{ .Content }}

        {{/* Use hidden spans for filter values - best practice per Pagefind docs */}}
        <span data-pagefind-filter="type" style="display:none;">docs</span>
        {{ with .Params.categories }}
            <span data-pagefind-filter="category" style="display:none;">{{ index . 0 }}</span>
        {{ end }}
      </div>

      {{ partial "components/last-edited.html" . }}
      {{ .Scratch.Set "invert_pager" true }}
      {{ partial "components/next-in-series.html" . }}
      {{ partial "comments.html" . }}
    </main>
  </article>
</div>
