{{ $page := .page }}
{{ $summary := .summary }}
{{ $site_type := site.Params.hugoblox.identity.type | humanize | default "Person" }}

{{- if $page.IsHome -}}

  {{ partialCached "jsonld/website.html" $page }}

  {{ if ne $site_type "Person" }}
    {{ partial "jsonld/business.html" $page }}
  {{ end }}

{{- else if $page.IsPage -}}

  {{ if (eq $page.Type "blog") | or (eq $page.Type "publications") | or (eq $page.Type "projects") }}
    {{ partial "jsonld/article.html" (dict "page" $page "summary" $summary) }}
  {{ end }}

  {{ if eq $page.Type "events" }}
    {{ partial "jsonld/event.html" (dict "page" $page "summary" $summary) }}
  {{ end }}

  {{/* Q&A Page - individual question/answer page */}}
  {{ if eq $page.Type "questions" }}
    {{ partial "jsonld/qapage.html" (dict "page" $page "summary" $summary) }}
  {{ end }}

  {{/* FAQ Page type */}}
  {{ if eq $page.Type "faq" }}
    {{ partial "jsonld/faqpage.html" (dict "page" $page "summary" $summary) }}
  {{ end }}

  {{ partial "jsonld/webpage.html" (dict "page" $page "summary" $summary) }}

{{- else -}}

  {{ partial "jsonld/collectionpage.html" (dict "page" $page "summary" $summary) }}

{{- end }}

{{ if not $page.IsHome }}
  {{ partial "jsonld/breadcrumbs.html" (dict "page" $page) }}
{{ end }}

{{/* FAQ content - can appear on any page type including landing pages and homepage */}}
{{ if or ($page.Params.faq_page) ($page.Params.faqs) }}
  {{ partial "jsonld/faqpage.html" (dict "page" $page "summary" $summary) }}
{{ end }}
