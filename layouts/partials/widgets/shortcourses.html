{{ $ := .root }}
{{ $page := .page }}
{{ $shortcourses_len := len (where $.Site.RegularPages "Type" "shortcourses") }}

<!-- Short Courses widget -->
<div class="container-shortcourses">
    <div class="row">
        <div class="col-xs-12 col-md-4 section-heading">
            <h1>{{ with $page.Title }}{{ . | markdownify }}{{ end }}</h1>
      {{ with $page.Params.subtitle }}<p>{{ . | markdownify }}</p>{{ end }}
        </div>
        <div class="col-xs-12 col-md-8">
          {{ with $page.Content }}<p>{{ . | markdownify }}</p>{{ end }}
          {{ range first $page.Params.count (sort (where $.Site.RegularPages "Type" "shortcourses") ".Params.time_start" "desc") }}
            <div class="shortcourses-metadata" style="margin-bottom: 1rem">
              <div class="row">
                  <div class="col-xs-12 col-sm-6">
                    <span itemprop="name"><a href="{{ .Permalink }}">{{ .Title }}</a></span>
                  </div>
                  <div class="col-xs-12 col-sm-6 shortcourses-date">
                   {{ $date := .Params.time_start | default .Date }}
                   {{ (time $date).Format $.Site.Params.shortcourses.date_format }}
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    {{ .Params.institution | markdownify }}
                  </div>
                  <div class="col-xs-12 col-sm-6 shortcourses-type">
                    {{ .Params.type_course }}
                  </div>
              </div>
            </div>
          {{ end }}  
        </div>
    </div>
</div>