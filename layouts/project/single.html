{{ partial "header.html" . }}
{{ partial "navbar.html" . }}

<article class="article article-project" itemscope itemtype="http://schema.org/Article">

  {{ partial "header_image.html" . }}

  <div class="article-container">

    <div class="pub-title">
      <h1 itemprop="name">{{ .Title }}</h1>
      <span class="pub-authors" itemprop="author">&nbsp;</span>
      <span class="pull-right">
        {{ partial "share.html" . }}
      </span>
    </div>

    {{ with .Params.external_link }}
    <a class="btn btn-primary btn-outline" href="{{ . }}" target="_blank" rel="noopener">{{ i18n "open_project_site" }}</a>
    {{ end }}

    <div class="article-style" itemprop="articleBody">
      {{ .Content }}

      {{ $page := . }}
      {{ $project := printf "%s/%s" .Section .File.TranslationBaseName }}

      {{ if .Params.list_publications }}
        {{ $pubs_len := len (where (where $.Site.RegularPages "Type" "publication") ".Params.url_project" "==" $project) }}
        {{ if ge $pubs_len 1 }}
          <h2>{{ (i18n "publications") }}</h2>
          {{ range where (where $.Site.RegularPages "Type" "publication") ".Params.url_project" "==" $project }}
            {{ if eq $page.Params.list_format 1 }}
              {{ partial "publication_li_detailed" . }}
            {{ else if eq $page.Params.list_format 2 }}
              {{ partial "publication_li_apa" . }}
            {{ else if eq $page.Params.list_format 3 }}
              {{ partial "publication_li_mla" . }}
            {{ else }}
              {{ partial "publication_li_simple" . }}
            {{ end }}
          {{ end }}
        {{ end }}
      {{ end }}

      {{ if .Params.list_talks }}
        {{ $talks_len := len (where (where $.Site.RegularPages "Type" "talk") ".Params.url_project" "==" $project) }}
        {{ if ge $talks_len 1 }}
          <h2>{{ (i18n "talks") }}</h2>
          {{ range where (where $.Site.RegularPages "Type" "talk") ".Params.url_project" "==" $project }}
            {{ partial "talk_li_simple" . }}
          {{ end }}
        {{ end }}
      {{ end }}

    </div>
  </div>
</article>

<div class="container">
  {{ partial "section_pager.html" . }}
</div>

{{ partial "footer_container.html" . }}
{{ partial "footer.html" . }}
